{% if runs %}
<table>
    <thead>
        <tr>
            <th>Started</th>
            <th>Completed</th>
            <th>Status</th>
            <th>Type</th>
            <th>Added</th>
            <th>Modified</th>
            <th>Removed</th>
            <th>Downloaded</th>
        </tr>
    </thead>
    <tbody>
        {% for run in runs %}
        <tr>
            <td>
                <a href="{{ url_for('sync.view', run_id=run.id) }}">
                    {{ run.started_at|localdatetime }}
                </a>
            </td>
            <td>{{ run.completed_at|localdatetime if run.completed_at else '-' }}</td>
            <td><span class="status-badge status-{{ run.status }}">{{ run.status }}</span></td>
            <td>{{ 'Full' if run.is_full_sync else 'Delta' }}</td>
            <td>{{ run.files_added }}</td>
            <td>{{ run.files_modified }}</td>
            <td>{{ run.files_removed }}</td>
            <td>{{ run.bytes_downloaded|filesize }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="no-results">No sync runs yet. Click "Sync Now" to start synchronizing.</p>
{% endif %}

{% if total is defined and per_page is defined and total > per_page %}
{% set total_pages = (total + per_page - 1) // per_page %}
<nav class="pagination">
    {% if page > 1 %}
    <a href="{{ url_for('sync.index', page=page - 1) }}"
       hx-get="{{ url_for('sync.index', page=page - 1) }}"
       hx-target="#sync-history"
       hx-swap="innerHTML"
       role="button"
       class="outline small">&laquo; Previous</a>
    {% endif %}
    <span>Page {{ page }} of {{ total_pages }} ({{ total }} sync runs)</span>
    {% if page < total_pages %}
    <a href="{{ url_for('sync.index', page=page + 1) }}"
       hx-get="{{ url_for('sync.index', page=page + 1) }}"
       hx-target="#sync-history"
       hx-swap="innerHTML"
       role="button"
       class="outline small">Next &raquo;</a>
    {% endif %}
</nav>
{% endif %}
