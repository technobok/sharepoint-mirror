{% extends "base.html" %}

{% block title %}{{ document.name }} - PDF Viewer{% endblock %}

{% block head %}
<style>
    .pdf-container {
        width: 100%;
        height: calc(100vh - 200px);
        min-height: 600px;
        border: 1px solid var(--pico-muted-border-color);
        border-radius: var(--pico-border-radius);
    }

    .pdf-container iframe {
        width: 100%;
        height: 100%;
        border: none;
    }

    .pdf-toolbar {
        display: flex;
        gap: 1rem;
        align-items: center;
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ul>
        <li><a href="{{ url_for('documents.index') }}">Documents</a></li>
        <li><a href="{{ url_for('documents.view', doc_id=document.id) }}">{{ document.name }}</a></li>
        <li>PDF Viewer</li>
    </ul>
</nav>

<article>
    <header>
        <h1>{{ document.name }}</h1>
        <div class="pdf-toolbar">
            <a href="{{ url_for('documents.download', doc_id=document.id) }}"
               role="button"
               class="outline small">
                Download
            </a>
            {% if document.web_url %}
            <a href="{{ document.web_url }}"
               target="_blank"
               rel="noopener"
               role="button"
               class="outline small">
                Open in SharePoint
            </a>
            {% endif %}
        </div>
    </header>

    <div class="pdf-container">
        <!-- Use pdf.js viewer or browser's built-in viewer -->
        <iframe
            src="{{ url_for('documents.content', doc_id=document.id) }}"
            title="{{ document.name }}"
            loading="lazy">
        </iframe>
    </div>
</article>
{% endblock %}
